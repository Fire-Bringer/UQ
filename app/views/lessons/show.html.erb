<div class="lesson-show" data-controller="lesson">
  <h1 class="header titlelesson" data-lesson-target="title">
    <%= params[:query] ? "#{params[:query].capitalize} Focused Lesson" : @lesson.title %>
  </h1>
  <p><%= @paragraph %></p>
  <br>
  <!-- Switch Button -->
  <div class="toggle-switch">
    <!-- Main Content Container -->
    <div data-lesson-target="mainContent">
      <div class="lesson-container">
        <!-- Nav tabs -->
     <ul class="lesson lesson-tabs">
          <%= link_to lesson_path(@lesson) + "?query=visual" do %>
            <li class="lesson-items">
              <i class="fa-regular fa-image filter-icons" id="visual-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=aural" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-headphones-simple filter-icons" id="aural-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=reading" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-book filter-icons" id="reading-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=kinesthetic" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-microphone filter-icons" id="kinesthetic-icon"></i>
            </li>
          <% end %>
        </ul>
        <!-- Tab panes -->
        <div class="lesson-content">
          <div class="lesson-pane">
            <% if params[:query] == 'visual' && @visual.present?%>
              <%= render 'visual' %>
            <% elsif params[:query] == 'aural' && @aural.present? %>
              <%= render 'aural' %>
            <% elsif params[:query] == 'reading' && @reading.present?%>
              <%= render 'reading' %>
            <% else %>
              <%= render 'kinesthetic' if @kinesthetic.present? %>
            <% end %>
          </div>
        </div>
        <ul class="lesson lesson-tabs">
          <!-- Help Chat Button -->
          <li class="lesson-item">
            <div class="btn-group dropstart">
              <button type="button" class="help-btn" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-chalkboard-user filter-icons" id="help-icon"></i>
              </button>
              <div class="dropdown-menu help-pop">
                <%= render 'help_chat' %>
              </div>
            </div>
          </li>
          <% if @lesson.has_supplementary_lessons? %>
            <%= link_to '#', data: { action: "click->lesson#toggleSupplementaryContent" } do %>
              <li class="lesson-items">
                <i class="fa-solid fa-graduation-cap filter-icons" id="supplementary-icon"></i>
              </li>
            <% end %>
          <% end %>
          <!--Dummy Quiz Button-->
          <li class="lesson-item">
            <i class="fa-solid fa-list-check filter-icons" id="quiz-icon"></i>
          </li>
        </ul>
      </div>
    </div>
    <!-- Supplementary Content Container (Initially Hidden) -->
    <div data-lesson-target="supplementaryContent" class="d-none">
      <div class="lesson-container">
        <!-- Nav tabs -->
        <ul class="lesson lesson-tabs">
          <%= link_to lesson_path(@lesson) + "?query=visual" do %>
            <li class="lesson-items">
              <i class="fa-regular fa-image filter-icons" id="visual-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=aural" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-headphones-simple filter-icons" id="aural-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=reading" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-book filter-icons" id="reading-icon"></i>
            </li>
          <% end %>
          <%= link_to lesson_path(@lesson) + "?query=kinesthetic" do %>
            <li class="lesson-items">
              <i class="fa-solid fa-microphone filter-icons" id="kinesthetic-icon"></i>
            </li>
          <% end %>
        </ul>
        <!-- Tab panes -->
        <div class="lesson-content">
          <div class="lesson-pane">
            <% if params[:query] == 'visual' && @supplementaryVisual.present? %>
              <%= render 'supplementary_visual', visual: @supplementaryVisual %>
            <% elsif params[:query] == 'aural' && @supplementaryAural.present? %>
              <%= render 'supplementary_aural', aural: @supplementaryAural %>
            <% elsif params[:query] == 'reading' && @supplementaryReading.present? %>
              <%= render 'supplementary_reading', reading: @supplementaryReading %>
            <% else %>
              <%= render 'supplementary_kinesthetic', kinesthetic: @supplementaryKinesthetic if @supplementaryKinesthetic.present? %>
            <% end %>
          </div>
        </div>
         <ul class="lesson lesson-tabs">
          <!-- Help Chat Button -->
          <li class="lesson-item">
            <div class="btn-group dropstart">
              <button type="button" class="help-btn" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-chalkboard-user filter-icons" id="help-icon"></i>
              </button>
              <div class="dropdown-menu help-pop">
                <%= render 'help_chat' %>
              </div>
            </div>
          </li>
          <% if @lesson.has_supplementary_lessons? %>
            <%= link_to '#', data: { action: "click->lesson#toggleSupplementaryContent" } do %>
              <li class="lesson-items">
                <i class="fa-solid fa-graduation-cap filter-icons" id="supplementary-icon"></i>
              </li>
            <% end %>
          <% end %>
          <!--Dummy Quiz Button-->
          <li class="lesson-item">
            <i class="fa-solid fa-list-check filter-icons" id="quiz-icon"></i>
          </li>
        </ul>
      </div>
    </div>
    <!-- Teacher & Student containers -->
  </div>
  <!-- Teacher & Student containers -->
  <br>
  <div class="teacher-container">
    <div class="teacher-container-infos">
      <div class="teacherandstudent">
        <div class="teacher1">
          <%= image_tag "profile.png" %>
        </div>
        <div class="student1">
          <%= render "stdPopUpLesson", students: @students %>
        </div>
      </div>
      <br>
      <h2><%= @lesson.title %></h2>
      <p>The present perfect tense is one of the common verb tenses in English, used to show an action that <strong> happened in the <br>
          past that is directly related to the present </strong>, such as actions that are still continuing or that indicate a change over time.</p>
    </div>
  </div>
</div>
    <br>
    <br>
    <br>
</div>
